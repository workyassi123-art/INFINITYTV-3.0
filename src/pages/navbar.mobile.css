/* ========== NAVBAR — PHONE ONLY ========== */
@media (max-width: 767px) {
  /* barre supérieure (aspect violet + blur comme sur le site) */
  .nav.nav-purple {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: rgba(20, 16, 52, .9); /* violet */
    -webkit-backdrop-filter: saturate(180%) blur(10px);
    backdrop-filter: saturate(180%) blur(10px);
    border-bottom: 1px solid rgba(255,255,255,.08);
  }

  /* wrapper: hauteur + safe-area pour iPhone */
  .nav-wrap {
    height: calc(56px + env(safe-area-inset-top));
    padding: calc(8px + env(safe-area-inset-top)) 14px 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  /* logo */
  .brand-logo {
    height: 28px;
    width: auto;
    display: block;
  }

  /* on cache le menu desktop */
  .nav .menu {
    display: none;
  }

  /* --- HAMBURGER --- */
  .nav-toggle {
    display: inline-flex;
    flex-direction: column;
    gap: 4px;
    appearance: none;
    background: transparent;
    border: 0;
    padding: 8px;
    margin: -8px; /* agrandit la zone de clic sans bouger le layout */
    cursor: pointer;
  }
  .nav-toggle span {
    width: 24px;
    height: 2px;
    background: #fff;
    border-radius: 2px;
    display: block;
  }

  /* --- BACKDROP --- */
  .nav-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, .45);
    opacity: 0;
    pointer-events: none;
    transition: opacity .25s ease;
  }

  /* --- DRAWER (menu latéral) --- */
  .nav-drawer {
    position: fixed;
    top: 0;
    right: 0;
    height: 100dvh;                       /* correct sur iOS */
    width: min(86vw, 360px);
    transform: translate3d(100%, 0, 0);   /* hors écran par défaut */
    transition: transform .28s ease;
    background: rgba(20, 16, 52, .96);    /* même violet, plus opaque */
    -webkit-backdrop-filter: saturate(180%) blur(14px);
    backdrop-filter: saturate(180%) blur(14px);
    display: flex;
    flex-direction: column;
    padding-top: calc(14px + env(safe-area-inset-top));
  }

  .nav-drawer a {
    display: block;
    padding: 14px 16px;
    margin: 4px 10px;
    border-radius: 12px;
    color: #fff;
    text-decoration: none;
    font-weight: 600;
  }
  .nav-drawer a.active {
    background: rgba(255, 255, 255, .12);
  }

  /* boutons dans le drawer */
  .nav-drawer .btn {
    text-align: center;
    margin: 6px 10px;
  }
  .nav-drawer .btn.ghost {
    background: transparent;
    color: #fff;
    border: 1px solid rgba(255, 255, 255, .2);
  }

  /* espace bas pour l’indicateur d’accueil iPhone */
  .drawer-safe {
    height: env(safe-area-inset-bottom);
  }

  /* état ouvert (on ajoute .is-open sur <header>) */
  .nav.is-open .nav-drawer {
    transform: translate3d(0, 0, 0);
  }
  .nav.is-open .nav-backdrop {
    opacity: 1;
    pointer-events: auto;
  }
}

/* sécurité: masquer les éléments mobile en desktop */
@media (min-width: 768px) {
  .nav-toggle,
  .nav-backdrop,
  .nav-drawer {
    display: none;
  }
}

/* accessibilité: réduit les animations si nécessaire */
@media (prefers-reduced-motion: reduce) {
  .nav-backdrop,
  .nav-drawer {
    transition: none;
  }
}
